\d
\dt
\q
CREATE DATABASE wolf;
\c wolf;
CREATE TABLE scat(
   scat_id CHAR(100) PRIMARY KEY     NOT NULL,
genetic_id CHAR(100),
genotype_id CHAR(100),
date date,
sampling_year CHAR(9),
sampling_type CHAR(100),
transect_id CHAR(100),
ST_id CHAR(100),
localita CHAR(100),
comune CHAR(100),
provincia CHAR(100),
deposition CHAR(100),
matrix CHAR(2),
collected_scat CHAR(2),
sample_genetic CHAR(2),
coordE int,
CoordN  int,
rilevatore_ente CHAR(255),
scalp_category CHAR(100)
);
\dt
\dt+
\l
drop database wolfdb;
\l
\dt
\d scat
drop table scat;
CREATE TABLE scat(
   scat_id CHAR(100) PRIMARY KEY     NOT NULL,
genetic_id CHAR(100),
genotype_id CHAR(100),
date date,
sampling_year CHAR(9),
sampling_type CHAR(100),
transect_id CHAR(100),
ST_id CHAR(100),
localita CHAR(100),
comune CHAR(100),
provincia CHAR(100),
deposition CHAR(100),
matrix CHAR(3),
collected_scat CHAR(3),
sample_genetic CHAR(3),
coordE int,
CoordN  int,
rilevatore_ente CHAR(255),
scalp_category CHAR(100)
);
select * from scat;
select * from scat;
select * from scat;
select scat_id from scat;
drop table scat;
CREATE TABLE scat(
   scat_id CHAR(100) PRIMARY KEY     NOT NULL,
genetic_id CHAR(100),
genotype_id CHAR(100),
date date,
sampling_year CHAR(9),
sampling_type CHAR(100),
transect_id CHAR(100),
ST_id CHAR(100),
localita CHAR(100),
comune CHAR(100),
provincia CHAR(100),
deposition CHAR(100),
matrix CHAR(3),
collected_scat CHAR(3),
sample_genetic CHAR(3),
coord_east int,
coord_north  int,
rilevatore_ente CHAR(255),
scalp_category CHAR(100)
);
CREATE TABLE transect(
transect_id CHAR(100) PRIMARY KEY NOT NULL,
sector INT,
localita CHAR(100),
provincia CHAR(100),
regione CHAR(50)
);
select * from "transect";
drop table transect;
CREATE TABLE transect(
transect_id CHAR(20) PRIMARY KEY NOT NULL,
sector INT,
localita TEXT,
provincia CHAR(50),
regione CHAR(50)
);
select * from "transect";
\dt
\dt
CREATE TABLE paths(
path_id SERIAL PRIMARY KEY,
transect_id CHAR(100),
date date, 
year CHAR(10),
completeness INT,
numero_segni_trovati INT,
numero_campioni INT,
operatore CHAR(100),
note TEXT
);
\dt
\d paths
drop table paths;
CREATE TABLE paths(
path_id SERIAL PRIMARY KEY,
transect_id CHAR(100),
date date, 
sampling_year CHAR(10),
completeness INT,
numero_segni_trovati INT,
numero_campioni INT,
operatore CHAR(100),
note TEXT
);
\d paths
seelct * from paths;
select * from paths;
drop table paths;
CREATE TABLE paths(
path_id SERIAL PRIMARY KEY,
transect_id CHAR(20),
date date, 
sampling_year CHAR(10),
completeness INT,
numero_segni_trovati INT,
numero_campioni INT,
operatore CHAR(100),
note TEXT
);
select * from paths;
\dt
select * from scat ;
drop table scat;
CREATE TABLE scat(
   scat_id CHAR(100) PRIMARY KEY     NOT NULL,
genetic_id CHAR(100),
genotype_id CHAR(100),
date date,
sampling_year CHAR(9),
sampling_type CHAR(100),
transect_id CHAR(100),
snowtrack_id CHAR(100),
localita CHAR(100),
comune CHAR(100),
provincia CHAR(100),
deposition CHAR(100),
matrix CHAR(3),
collected_scat CHAR(3),
sample_genetic CHAR(3),
coord_east int,
coord_north  int,
rilevatore_ente CHAR(255),
scalp_category CHAR(100)
);
CREATE TABLE snow_tracks(
snowtracking_id CHAR(50) PRIMARY KEY,
date date,
sampling_season CHAR(10),
comune CHAR(100),
provincia CHAR(50),
regione CHAR(50),
rilevatore CHAR(255),
scalp_category CHAR(100),
systematic_sampling CHAR(3),
transect_id CHAR(20),
giorni_dopo_nevicata INT,
n_minimo_individui INT,
track_format CHAR(50)
);
\dt
\d snow_tracks
seelct * from snow_tracks ;
select * from snow_tracks ;
\dt
\dt
drop table paths;
drop table scat;
drop table snow_tracks;
drop ttable transect;
drop table transect;
\dt
CREATE TABLE scat(
scat_id VARCHAR(100) PRIMARY KEY     NOT NULL,
genetic_id VARCHAR(100),
genotype_id VARCHAR(100),
date date,
sampling_year VARCHAR(9),
sampling_type VARCHAR(100),
transect_id VARCHAR(100),
snowtrack_id VARCHAR(100),
localita VARCHAR(100),
comune VARCHAR(100),
provincia VARCHAR(100),
deposition VARCHAR(100),
matrix VARCHAR(3),
collected_scat VARCHAR(3),
sample_genetic VARCHAR(3),
coord_east int,
coord_north  int,
rilevatore_ente VARCHAR(255),
scalp_category VARCHAR(100)
);
CREATE TABLE transect(
transect_id VARCHAR(20) PRIMARY KEY NOT NULL,
sector INT,
localita TEXT,
provincia VARCHAR(50),
regione VARCHAR(50)
);
CREATE TABLE paths(
path_id SERIAL PRIMARY KEY,
transect_id VARCHAR(20),
date date, 
sampling_year VARCHAR(10),
completeness INT,
numero_segni_trovati INT,
numero_campioni INT,
operatore VARCHAR(100),
note TEXT
);
CREATE TABLE snow_tracks(
snowtrack_id VARCHAR(50) PRIMARY KEY,
date date,
sampling_season VARCHAR(10),
comune VARCHAR(100),
provincia VARCHAR(50),
regione VARCHAR(50),
rilevatore VARCHAR(255),
scalp_category VARCHAR(100),
systematic_sampling VARCHAR(3),
transect_id VARCHAR(20),
giorni_dopo_nevicata INT,
n_minimo_individui INT,
track_format VARCHAR(50)
);
\dt
drop table scat;
drop table snow_tracks;
drop table transect;
drop table paths;
\dt
CREATE TABLE scat(
scat_id VARCHAR(100) PRIMARY KEY     NOT NULL,
genetic_id VARCHAR(100),
genotype_id VARCHAR(100),
date date,
sampling_season VARCHAR(9),
sampling_type VARCHAR(100),
transect_id VARCHAR(100),
snowtrack_id VARCHAR(100),
localita VARCHAR(100),
comune VARCHAR(100),
provincia VARCHAR(100),
deposition VARCHAR(100),
matrix VARCHAR(3),
collected_scat VARCHAR(3),
sample_genetic VARCHAR(3),
coord_east int,
coord_north  int,
rilevatore_ente VARCHAR(255),
scalp_category VARCHAR(100)
);
CREATE TABLE transect(
transect_id VARCHAR(20) PRIMARY KEY NOT NULL,
sector INT,
localita TEXT,
provincia VARCHAR(50),
regione VARCHAR(50)
);
CREATE TABLE paths(
path_id SERIAL PRIMARY KEY,
transect_id VARCHAR(20),
date date, 
sampling_season VARCHAR(10),
completeness INT,
numero_segni_trovati INT,
numero_campioni INT,
operatore VARCHAR(100),
note TEXT
);
CREATE TABLE snow_tracks(
snowtrack_id VARCHAR(50) PRIMARY KEY,
date date,
sampling_season VARCHAR(10),
comune VARCHAR(100),
provincia VARCHAR(50),
regione VARCHAR(50),
rilevatore VARCHAR(255),
scalp_category VARCHAR(100),
systematic_sampling VARCHAR(3),
transect_id VARCHAR(20),
giorni_dopo_nevicata INT,
n_minimo_individui INT,
track_format VARCHAR(50)
);
\dt
drop table scat; drop table paths; drop table snowtracks;
drop table scat; drop table paths; drop table snow_tracks;
\l
\dt
drop table scat; drop table paths; drop table snow_tracks; drop table transect ;
drop table scat; drop table paths; drop table snow_tracks; drop table transect ;
CREATE TABLE scat(
scat_id                VARCHAR(100) PRIMARY KEY     NOT NULL,
genetic_id            VARCHAR(100),
genotype_id            VARCHAR(100),
date                date,
sampling_season        VARCHAR(9),
sampling_type        VARCHAR(100),
path_id                VARCHAR(50),
snowtrack_id        VARCHAR(100),
localita            VARCHAR(100),
comune                VARCHAR(100),
provincia            VARCHAR(100),
deposition            VARCHAR(100),
matrix                VARCHAR(3),
collected_scat        VARCHAR(3),
sample_genetic        VARCHAR(3),
coord_east            int,
coord_north         int,
rilevatore_ente        VARCHAR(255),
scalp_category        VARCHAR(100)
);
CREATE TABLE transect(
transect_id            VARCHAR(20) PRIMARY KEY NOT NULL,
sector                INT,
localita               TEXT,
provincia              VARCHAR(50),
regione                VARCHAR(50)
);
CREATE TABLE paths(
id                    SERIAL PRIMARY KEY,
transect_id            VARCHAR(20),
date                   date,
sampling_season        VARCHAR(9),
completeness        INT,
operatore              VARCHAR(100),
note                TEXT
);
CREATE TABLE snow_tracks(
snowtrack_id           VARCHAR(50) PRIMARY KEY NOT NULL,
path_id                VARCHAR(50),
date                   date,
sampling_season        VARCHAR(9),
comune                 VARCHAR(100),
provincia              VARCHAR(50),
regione                VARCHAR(50),
rilevatore             VARCHAR(255),
scalp_category         VARCHAR(100),
systematic_sampling    VARCHAR(3),
giorni_dopo_nevicata   INT,
n_minimo_individui     INT,
track_format           VARCHAR(50)
);
\dt
drop table scat; drop table paths; drop table snow_tracks; drop table transect ;
\dt
drop table paths; drop table scat; drop table snow_tracks; drop table transect;
CREATE TABLE scats(
scat_id                VARCHAR(100) PRIMARY KEY     NOT NULL,
date                date,
wa_code                VARCHAR(100),
genotype_id            VARCHAR(100),
sampling_season        VARCHAR(9),
sampling_type        VARCHAR(20),
path_id                VARCHAR(50),
snowtrack_id        VARCHAR(100),
place                VARCHAR(100),
municipality           VARCHAR(50),
province            VARCHAR(50),
region                 VARCHAR(50),
deposition            VARCHAR(100),
matrix                VARCHAR(3),
collected_scat        VARCHAR(3),
scalp_category        VARCHAR(2),
sample_genetic        VARCHAR(3),
coord_east            int,
coord_north         int,
coord_zone             varchar(3),
observer             VARCHAR(255),
institution            VARCHAR(255)
);
CREATE TABLE transects(
transect_id            VARCHAR(20) PRIMARY KEY NOT NULL,
sector                INT,
place                VARCHAR(100),
municipality           VARCHAR(50),
province            VARCHAR(50),
region                 VARCHAR(50)
);
CREATE TABLE paths(
path_id                VARCHAR(50) PRIMARY KEY NOT NULL,
transect_id            VARCHAR(20),
date                   date,
sampling_season        VARCHAR(9),
completeness        INT,
observer              VARCHAR(255),
institution            VARCHAR(255),
note                TEXT
);
CREATE TABLE snow_tracks(
snowtrack_id           VARCHAR(50) PRIMARY KEY NOT NULL,
path_id                VARCHAR(50),
date                   date,
sampling_season        VARCHAR(9),
place                VARCHAR(100),
municipality           VARCHAR(50),
province            VARCHAR(50),
region                 VARCHAR(50),
observer               VARCHAR(255),
institution            VARCHAR(255),
scalp_category         VARCHAR(2),
sampling_type        VARCHAR(20),
nb_days_after_snowing  INT,
min_number_subjects    INT,
track_format           VARCHAR(50),
note                TEXT
);
\dt
SELECT postgis_full_version();
CREATE EXTENSION postgis;
CREATE EXTENSION postgis;
SELECT postgis_full_version();
COPY public.paths (path_id, transect_id, date, sampling_season, completeness, observer, institution, note) FROM stdin;
drop table paths; drop table scats; drop table snow_tracks; drop table transects;
\dt
--
-- PostgreSQL database dump
--
-- Dumped from database version 12.8 (Ubuntu 12.8-0ubuntu0.20.04.1)
-- Dumped by pg_dump version 12.8 (Ubuntu 12.8-0ubuntu0.20.04.1)
SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;
SET default_tablespace = '';
SET default_table_access_method = heap;
--
-- Name: paths; Type: TABLE; Schema: public; Owner: postgres
--
CREATE TABLE public.paths (
    path_id character varying(50) NOT NULL,
    transect_id character varying(20),
    date date,
    sampling_season character varying(9),
    completeness integer,
    observer character varying(255),
    institution character varying(255),
    note text
);
ALTER TABLE public.paths OWNER TO postgres;
--
-- Name: paths_path_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--
CREATE SEQUENCE public.paths_path_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;
ALTER TABLE public.paths_path_id_seq OWNER TO postgres;
--
-- Name: scats; Type: TABLE; Schema: public; Owner: postgres
--
CREATE TABLE public.scats (
    scat_id character varying(100) NOT NULL,
    date date,
    wa_code character varying(100),
    genotype_id character varying(100),
    sampling_season character varying(9),
    sampling_type character varying(20),
    path_id character varying(50),
    snowtrack_id character varying(100),
    place character varying(100),
    municipality character varying(50),
    province character varying(50),
    region character varying(50),
    deposition character varying(100),
    matrix character varying(3),
    collected_scat character varying(3),
    scalp_category character varying(2),
    sample_genetic character varying(3),
    coord_east integer,
    coord_north integer,
    coord_zone character varying(3),
    observer character varying(255),
    institution character varying(255)
);
ALTER TABLE public.scats OWNER TO postgres;
--
-- Name: snow_tracks; Type: TABLE; Schema: public; Owner: postgres
--
CREATE TABLE public.snow_tracks (
    snowtrack_id character varying(50) NOT NULL,
    path_id character varying(50),
    date date,
    sampling_season character varying(9),
    place character varying(100),
    municipality character varying(50),
    province character varying(50),
    region character varying(50),
    observer character varying(255),
    institution character varying(255),
    scalp_category character varying(2),
    sampling_type character varying(20),
    nb_days_after_snowing integer,
    min_number_subjects integer,
    track_format character varying(50),
    note text
);
ALTER TABLE public.snow_tracks OWNER TO postgres;
--
-- Name: transects; Type: TABLE; Schema: public; Owner: postgres
--
CREATE TABLE public.transects (
    transect_id character varying(20) NOT NULL,
    sector integer,
    place character varying(100),
    municipality character varying(50),
    province character varying(50),
    region character varying(50)
);
ALTER TABLE public.transects OWNER TO postgres;
--
-- Data for Name: paths; Type: TABLE DATA; Schema: public; Owner: postgres
--
COPY public.paths (path_id, transect_id, date, sampling_season, completeness, observer, institution, note) FROM stdin;
drop table paths; drop table scats; drop table snow_tracks; drop table transects;
\dt
drop table paths; drop table scats; drop table snow_tracks; drop table transects;
\dt
\dt
select * from scats;
CREATE TABLE loci(
name VARCHAR(20) PRIMARY KEY NOT NULL
);
\dt
INSERT INTO loci (name) VALUES('cph5');
INSERT INTO loci (name) VALUES('u250');
INSERT INTO loci (name) VALUES('fh2088');
INSERT INTO loci (name) VALUES('fh2096');
INSERT INTO loci (name) VALUES('fh2137');
INSERT INTO loci (name) VALUES('fh2054');
INSERT INTO loci (name) VALUES('fh2140');
INSERT INTO loci (name) VALUES('fh2161');
INSERT INTO loci (name) VALUES('Pez17');
INSERT INTO loci (name) VALUES('MSY34A');
INSERT INTO loci (name) VALUES('MSY34B');
INSERT INTO loci (name) VALUES('MSY41A');
INSERT INTO loci (name) VALUES('MSY41B');
INSERT INTO loci (name) VALUES('cph2');
INSERT INTO loci (name) VALUES('CPH4');
INSERT INTO loci (name) VALUES('CPH8');
INSERT INTO loci (name) VALUES('CPH12');
INSERT INTO loci (name) VALUES('U253');
INSERT INTO loci (name) VALUES('FH2004');
INSERT INTO loci (name) VALUES('FH2079');
INSERT INTO loci (name) VALUES('K-Locus');
INSERT INTO loci (name) VALUES('SRY');
CREATE TABLE wa_locus(
wa_code VARCHAR(20),
locus VARCHAR(20),
value1 INT,
value2 INT
);
\dt
\d wa_locus 
\d snow_tracks
alter table snow_tracks rename column nb_days_after_snowing TO days_after_snowfall;
\d snow_tracks
alter table snow_tracks rename column min_number_subjects TO minimum_number_of_wolves;
\dt
\d scats
\d snow_tracks
\d scats
alter table scats rename column place to location;
\ dt
\dt scats 
\d scats 
\dt scats 
alter table scats rename column sample_genetic to genetic_sample;
\d scats
\d snow_tracks
alter table snow_tracks rename column place to location;
\d transects
alter table transects rename column place to location;
\d snow_tracks
\d transects
select * from transects ;
delete from transects ;
INSERT INTO transects (transect_id, sector, region, location, province) VALUES ('CN_21',  1 ,'Piemonte', 'Colletta Salse - Colla Bassa - Upega', 'IM CN');
INSERT INTO transects (transect_id, sector, region, location, province) VALUES ('CN_21',  1 ,'Piemonte', 'Colletta Salse - Colla Bassa - Upega', 'IM CN');
INSERT INTO transects (transect_id, sector, region, location, province) VALUES ('CN_16',  1 ,'Piemonte', 'Tanarello', 'IM');
INSERT INTO transects (transect_id, sector, region, location, province) VALUES ('CN_102', 1    ,'Piemonte', 'Tanarello-Saccarello', 'IM CN');
INSERT INTO transects (transect_id, sector, region, location, province) VALUES ('CN_18',  1 ,'Piemonte', 'Navette Liguri', 'CN IM');
INSERT INTO transects (transect_id, sector, region, location, province) VALUES ('CN_19',  1 ,'Piemonte', 'Navette', 'CN');
select * from transects ;
select scat_is, wa_code from scats ;
select scat_id, wa_code from scats ;
\dt
\d scats
\dt
seelct * from paths;
select * from paths;
\dt+ paths 
\d+ paths 
\dt
select * from wa_locus ;
select wa_code from scats ;
update scats set genetic_sample='Yes' where  wa_code='WA1234' ;
\dt wa_locus 
\d wa_locus 
\d loci
CREATE TABLE loci(
name VARCHAR(20) PRIMARY KEY NOT NULL
);
CREATE TABLE test (gid serial PRIMARY KEY, value int, geog geography(POINT) );
\dt test 
\d test 
drop table test ;
CREATE TABLE test (gid serial PRIMARY KEY, value int, geog geography(POINT, 32632));
CREATE TABLE test (gid serial PRIMARY KEY, value int, geog geography(POINT, 25832));
CREATE TABLE test (gid serial PRIMARY KEY, value int, geog geography(POINT));
insert into test (value, geog) VALUES (42, 'SRID=4326;POINT(44.15236 7.701707)');
select * from test;
insert into test (value, geog) VALUES (42, 'SRID=4326;POINT(44.5 7.401707)');
insert into test (value, geog) VALUES (36, 'SRID=4326;POINT(7.401707 44.5)');
alter table scats add column geo geography(POINT) constraint;
alter table scats add column geo geography(POINT);
\d scats
drop table test;
select geo from scats;
select scat_id, geo from scats;
select scat_id, geo from scats;
select scat_id, geo from scats;
select scat_id, geo from scats;
select scat_id, geo from scats;
\dsn 
\d snow_tracks
\dt
\s dead_wolves_bp/
\s dead_wolves_bp
\s dead_wolves
